[package]
name = "substrate-wasm-builder"
version = "17.0.0"
authors.workspace = true
description = "Utility for building WASM binaries"
edition.workspace = true
repository.workspace = true
license = "Apache-2.0"
homepage = "https://substrate.io"

[lints]
workspace = true

[package.metadata.docs.rs]
targets = ["x86_64-unknown-linux-gnu"]

[dependencies]
build-helper = "0.1.1"
cargo_metadata = "0.15.4"
console = "0.15.8"
strum = { version = "0.24.1", features = ["derive"] }
tempfile = "3.1.0"
toml = "0.8.8"
walkdir = "2.4.0"
sp-maybe-compressed-blob = { path = "../../primitives/maybe-compressed-blob" }
filetime = "0.2.16"
wasm-opt = "0.116"
parity-wasm = "0.45"
merkleized-metadata = { git = "https://github.com/bkchr/merkleized-metadata.git", optional = true }
sc-executor-wasmtime = { path = "../../client/executor/wasmtime", optional = true }
sp-io = { path = "../../primitives/io", optional = true }
frame-metadata = { version = "16.0.0", features = [ "current" ], optional = true }
codec = { package = "parity-scale-codec", version = "3.1.5", optional = true }
array-bytes = "6.1"
sp-tracing = { path = "../../primitives/tracing", optional = true }
polkavm-linker = { workspace = true }

[features]
default = [ "experimental-metadata-hash" ]
experimental-metadata-hash = [ "merkleized-metadata", "sc-executor-wasmtime", "sp-io", "frame-metadata", "codec", "sp-tracing" ]
