<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API to interact with MMR pallet."><title>MmrRuntimeApi in mmr_rpc - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-9ee3a5e31a2afa3e.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="mmr_rpc" data-themes="" data-resource-suffix="" data-rustdoc-version="1.75.0 (82e1608df 2023-12-21)" data-channel="1.75.0" data-search-js="search-8fbf244ebcf71464.js" data-settings-js="settings-74424d7eec62a23e.js" ><script src="../static.files/storage-fec3eaa3851e447d.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-9dd44ab47b99a0fb.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-5d8b3c7633ad77ba.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"><script async defer src="https://apisa.parity.io/latest.js"></script><noscript><img src="https://apisa.parity.io/latest.js" alt="" referrerpolicy="no-referrer-when-downgrade" /></noscript></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../mmr_rpc/index.html">mmr_rpc</a><span class="version">28.0.0</span></h2></div><h2 class="location"><a href="#">MmrRuntimeApi</a></h2><div class="sidebar-elems"><section><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.generate_proof">generate_proof</a></li><li><a href="#method.mmr_leaf_count">mmr_leaf_count</a></li><li><a href="#method.mmr_root">mmr_root</a></li><li><a href="#method.verify_proof">verify_proof</a></li><li><a href="#method.verify_proof_stateless">verify_proof_stateless</a></li></ul><h3><a href="#trait-implementations">Trait Implementations</a></h3><ul class="block trait-implementation"><li><a href="#impl-RuntimeApiInfo-for-dyn+MmrApi%3CBlock,+Hash,+BlockNumber%3E">RuntimeApiInfo</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In crate mmr_rpc</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="index.html">mmr_rpc</a>::<wbr><a class="trait" href="#">MmrRuntimeApi</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait MmrRuntimeApi&lt;Block, Hash, BlockNumber&gt;: Core&lt;Block&gt;<span class="where fmt-newline">where
    Block: Block,
    Hash: Codec,
    BlockNumber: Codec,</span>{
    // Provided methods
    fn <a href="#method.mmr_root" class="fn">mmr_root</a>(
        &amp;self,
        __runtime_api_at_param__: &lt;Block as Block&gt;::Hash
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.75.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.75.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Hash, Error&gt;, ApiError&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.mmr_leaf_count" class="fn">mmr_leaf_count</a>(
        &amp;self,
        __runtime_api_at_param__: &lt;Block as Block&gt;::Hash
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.75.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.75.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.75.0/std/primitive.u64.html">u64</a>, Error&gt;, ApiError&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.generate_proof" class="fn">generate_proof</a>(
        &amp;self,
        __runtime_api_at_param__: &lt;Block as Block&gt;::Hash,
        block_numbers: <a class="struct" href="https://doc.rust-lang.org/1.75.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;BlockNumber&gt;,
        best_known_block_number: <a class="enum" href="https://doc.rust-lang.org/1.75.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;BlockNumber&gt;
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.75.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.75.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;(<a class="struct" href="https://doc.rust-lang.org/1.75.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;EncodableOpaqueLeaf&gt;, Proof&lt;Hash&gt;), Error&gt;, ApiError&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.verify_proof" class="fn">verify_proof</a>(
        &amp;self,
        __runtime_api_at_param__: &lt;Block as Block&gt;::Hash,
        leaves: <a class="struct" href="https://doc.rust-lang.org/1.75.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;EncodableOpaqueLeaf&gt;,
        proof: Proof&lt;Hash&gt;
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.75.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.75.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.75.0/std/primitive.unit.html">()</a>, Error&gt;, ApiError&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.verify_proof_stateless" class="fn">verify_proof_stateless</a>(
        &amp;self,
        __runtime_api_at_param__: &lt;Block as Block&gt;::Hash,
        root: Hash,
        leaves: <a class="struct" href="https://doc.rust-lang.org/1.75.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;EncodableOpaqueLeaf&gt;,
        proof: Proof&lt;Hash&gt;
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.75.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.75.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.75.0/std/primitive.unit.html">()</a>, Error&gt;, ApiError&gt; { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>API to interact with MMR pallet.</p>
</div></details><h2 id="provided-methods" class="small-section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.mmr_root" class="method"><h4 class="code-header">fn <a href="#method.mmr_root" class="fn">mmr_root</a>(
    &amp;self,
    __runtime_api_at_param__: &lt;Block as Block&gt;::Hash
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.75.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.75.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Hash, Error&gt;, ApiError&gt;</h4></section></summary><div class="docblock"><p>Return the on-chain MMR root hash.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.mmr_leaf_count" class="method"><h4 class="code-header">fn <a href="#method.mmr_leaf_count" class="fn">mmr_leaf_count</a>(
    &amp;self,
    __runtime_api_at_param__: &lt;Block as Block&gt;::Hash
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.75.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.75.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.75.0/std/primitive.u64.html">u64</a>, Error&gt;, ApiError&gt;</h4></section></summary><div class="docblock"><p>Return the number of MMR blocks in the chain.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.generate_proof" class="method"><h4 class="code-header">fn <a href="#method.generate_proof" class="fn">generate_proof</a>(
    &amp;self,
    __runtime_api_at_param__: &lt;Block as Block&gt;::Hash,
    block_numbers: <a class="struct" href="https://doc.rust-lang.org/1.75.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;BlockNumber&gt;,
    best_known_block_number: <a class="enum" href="https://doc.rust-lang.org/1.75.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;BlockNumber&gt;
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.75.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.75.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;(<a class="struct" href="https://doc.rust-lang.org/1.75.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;EncodableOpaqueLeaf&gt;, Proof&lt;Hash&gt;), Error&gt;, ApiError&gt;</h4></section></summary><div class="docblock"><p>Generate MMR proof for a series of block numbers. If <code>best_known_block_number = Some(n)</code>,
use historical MMR state at given block height <code>n</code>. Else, use current MMR state.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.verify_proof" class="method"><h4 class="code-header">fn <a href="#method.verify_proof" class="fn">verify_proof</a>(
    &amp;self,
    __runtime_api_at_param__: &lt;Block as Block&gt;::Hash,
    leaves: <a class="struct" href="https://doc.rust-lang.org/1.75.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;EncodableOpaqueLeaf&gt;,
    proof: Proof&lt;Hash&gt;
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.75.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.75.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.75.0/std/primitive.unit.html">()</a>, Error&gt;, ApiError&gt;</h4></section></summary><div class="docblock"><p>Verify MMR proof against on-chain MMR for a batch of leaves.</p>
<p>Note this function will use on-chain MMR root hash and check if the proof matches the hash.
Note, the leaves should be sorted such that corresponding leaves and leaf indices have the
same position in both the <code>leaves</code> vector and the <code>leaf_indices</code> vector contained in the [Proof]</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.verify_proof_stateless" class="method"><h4 class="code-header">fn <a href="#method.verify_proof_stateless" class="fn">verify_proof_stateless</a>(
    &amp;self,
    __runtime_api_at_param__: &lt;Block as Block&gt;::Hash,
    root: Hash,
    leaves: <a class="struct" href="https://doc.rust-lang.org/1.75.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;EncodableOpaqueLeaf&gt;,
    proof: Proof&lt;Hash&gt;
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.75.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.75.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.75.0/std/primitive.unit.html">()</a>, Error&gt;, ApiError&gt;</h4></section></summary><div class="docblock"><p>Verify MMR proof against given root hash for a batch of leaves.</p>
<p>Note this function does not require any on-chain storage - the
proof is verified against given MMR root hash.</p>
<p>Note, the leaves should be sorted such that corresponding leaves and leaf indices have the
same position in both the <code>leaves</code> vector and the <code>leaf_indices</code> vector contained in the [Proof]</p>
</div></details></div><h2 id="trait-implementations" class="small-section-header">Trait Implementations<a href="#trait-implementations" class="anchor">§</a></h2><div id="trait-implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-RuntimeApiInfo-for-dyn+MmrApi%3CBlock,+Hash,+BlockNumber%3E" class="impl"><a href="#impl-RuntimeApiInfo-for-dyn+MmrApi%3CBlock,+Hash,+BlockNumber%3E" class="anchor">§</a><h3 class="code-header">impl&lt;Block, Hash, BlockNumber&gt; RuntimeApiInfo for dyn <a class="trait" href="trait.MmrRuntimeApi.html" title="trait mmr_rpc::MmrRuntimeApi">MmrApi</a>&lt;Block, Hash, BlockNumber&gt;<span class="where fmt-newline">where
    Block: Block,
    Hash: Codec,
    BlockNumber: Codec,</span></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedconstant.ID" class="associatedconstant trait-impl"><a href="#associatedconstant.ID" class="anchor">§</a><h4 class="code-header">const <a class="constant">ID</a>: [<a class="primitive" href="https://doc.rust-lang.org/1.75.0/std/primitive.u8.html">u8</a>; <a class="primitive" href="https://doc.rust-lang.org/1.75.0/std/primitive.array.html">8</a>] = _</h4></section></summary><div class='docblock'>The identifier of the runtime api.</div></details><details class="toggle" open><summary><section id="associatedconstant.VERSION" class="associatedconstant trait-impl"><a href="#associatedconstant.VERSION" class="anchor">§</a><h4 class="code-header">const <a class="constant">VERSION</a>: <a class="primitive" href="https://doc.rust-lang.org/1.75.0/std/primitive.u32.html">u32</a> = 2u32</h4></section></summary><div class='docblock'>The version of the runtime api.</div></details></div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"></div><script src="../trait.impl/sp_mmr_primitives/trait.MmrApi.js" async></script></section></div></main></body></html>