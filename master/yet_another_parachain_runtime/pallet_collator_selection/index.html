<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Collator Selection pallet."><title>yet_another_parachain_runtime::pallet_collator_selection - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-1a91846b.css"><script id="default-settings" 
data-use_system_theme="false"
data-theme="ayu"></script><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="yet_another_parachain_runtime" data-themes="" data-resource-suffix="" data-rustdoc-version="1.88.0 (6b00bc388 2025-06-23)" data-channel="1.88.0" data-search-js="search-f7877310.js" data-settings-js="settings-5514c975.js" ><script src="../../static.files/storage-4e99c027.js"></script><script defer src="../../crates.js"></script><script defer src="../../static.files/main-7ef8a74a.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="stylesheet" href="../../theme.css"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"><script>
	function createToC() {
		let sidebar = document.querySelector(".sidebar");
		let headers = document.querySelectorAll("#main-content h2, #main-content h3, #main-content h4");
		console.log(`detected polkadot_sdk_docs: headers: ${headers.length}`);

		let toc = document.createElement("div");
		toc.classList.add("sidebar-table-of-contents");
		toc.appendChild(document.createElement("h2").appendChild(document.createTextNode("Table of Contents")).parentNode);

		let modules = document.querySelectorAll("main .item-table a.mod");

		// the first two headers are always junk
		headers.forEach(header => {
			let link = document.createElement("a");
			link.href = "#" + header.id;
			const headerTextContent = header.textContent.replace("ยง", "")
			link.textContent = headerTextContent;
			link.className = header.tagName.toLowerCase();

			toc.appendChild(link);

			if (header.id == "modules" && headerTextContent == "Modules") {
				modules.forEach(module => {
					let link = document.createElement("a");
					link.href = module.href;
					link.textContent = module.textContent;
					link.className = "h3";

					toc.appendChild(link);
				});
			}
		});

		// insert toc as the second child in sidebar
		let sidebar_children = sidebar.children;
		if (sidebar_children.length > 1) {
			sidebar.insertBefore(toc, sidebar_children[1]);
		} else {
			sidebar.appendChild(toc);
		}
	}

	function hideSidebarElements() {
		// Create the 'Expand for More' button
		var expandButton = document.createElement('button');
		expandButton.innerText = 'Expand More Items';
		expandButton.classList.add('expand-button');

		// Insert the button at the top of the sidebar or before the '.sidebar-elems'
		var sidebarElems = document.querySelector('.sidebar-elems');
		sidebarElems.parentNode.insertBefore(expandButton, sidebarElems);

		// Initially hide the '.sidebar-elems'
		sidebarElems.style.display = 'none';

		// Add click event listener to the button
		expandButton.addEventListener('click', function () {
			// Toggle the display of the '.sidebar-elems'
			if (sidebarElems.style.display === 'none') {
				sidebarElems.style.display = 'block';
				expandButton.innerText = 'Collapse';
			} else {
				sidebarElems.style.display = 'none';
				expandButton.innerText = 'Expand for More';
			}
		});
	}

	window.addEventListener("DOMContentLoaded", (event) => {
		// if the crate is one that starts with `polkadot_sdk_docs`
		let crate_name = document.querySelector("#main-content > div > h1 > a:nth-child(1)");
		if (!crate_name.textContent.startsWith("polkadot_sdk_docs")) {
			console.log("skipping -- not `polkadot_sdk_docs`");
			return;
		} else {
			// insert class 'sdk-docs' to the body, so it enables the custom css rules.
			document.body.classList.add("sdk-docs");
		}

		createToC();
		hideSidebarElements();

		console.log("updating page based on being `polkadot_sdk_docs` crate");
	});
</script>

<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>

<style>
	body.sdk-docs {
		nav.side-bar {
			width: 300px;
		}

		.sidebar-table-of-contents {
			margin-bottom: 1em;
			padding: 0.5em;
		}

		.sidebar-table-of-contents a {
			display: block;
			margin: 0.2em 0;
		}

		.sidebar-table-of-contents .h2 {
			font-weight: bold;
			margin-left: 0;
		}

		.sidebar-table-of-contents .h3 {
			margin-left: 1em;
		}

		.sidebar-table-of-contents .h4 {
			margin-left: 2em;
		}

		.sidebar h2.location {
			display: none;
		}

		.sidebar-elems {
			display: none;
		}

		/* Center the 'Expand for More' button */
		.expand-button {
			display: inline-block;
			/* Use inline-block for sizing */
			margin: 10px auto;
			/* Auto margins for horizontal centering */
			padding: 5px 10px;
			background-color: #007bff;
			color: white;
			text-align: center;
			cursor: pointer;
			border: none;
			border-radius: 5px;
			width: auto;
			/* Centering the button within its parent container */
			position: relative;
			left: 50%;
			transform: translateX(-50%);
		}
	}
</style>

<script async defer src=https://apisa.parity.io/latest.js></script><noscript><img src=https://apisa.parity.io/latest.js alt= referrerpolicy=no-referrer-when-downgrade /></noscript></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../yet_another_parachain_runtime/index.html">yet_<wbr>another_<wbr>parachain_<wbr>runtime</a><span class="version">0.6.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#overview" title="Overview">Overview</a></li><li><a href="#terminology" title="Terminology">Terminology</a></li><li><a href="#implementation" title="Implementation">Implementation</a><ul><li><a href="#rewards" title="Rewards">Rewards</a></li></ul></li></ul><h3><a href="#modules">Crate Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#types" title="Type Aliases">Type Aliases</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">yet_another_parachain_runtime</a></div><h1>Crate <span>pallet_collator_selection</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/pallet_collator_selection/lib.rs.html#16-1013">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Collator Selection pallet.</p>
<p>A pallet to manage collators in a parachain.</p>
<h3 id="overview"><a class="doc-anchor" href="#overview">ยง</a>Overview</h3>
<p>The Collator Selection pallet manages the collators of a parachain. <strong>Collation is <em>not</em> a
secure activity</strong> and this pallet does not implement any game-theoretic mechanisms to meet BFT
safety assumptions of the chosen set.</p>
<h3 id="terminology"><a class="doc-anchor" href="#terminology">ยง</a>Terminology</h3>
<ul>
<li>Collator: A parachain block producer.</li>
<li>Bond: An amount of <code>Balance</code> <em>reserved</em> for candidate registration.</li>
<li>Invulnerable: An account guaranteed to be in the collator set.</li>
</ul>
<h3 id="implementation"><a class="doc-anchor" href="#implementation">ยง</a>Implementation</h3>
<p>The final <code>Collators</code> are aggregated from two individual lists:</p>
<ol>
<li><a href="type.Invulnerables.html" title="type yet_another_parachain_runtime::pallet_collator_selection::Invulnerables"><code>Invulnerables</code></a>: a set of collators appointed by governance. These accounts will always be
collators.</li>
<li><a href="type.CandidateList.html" title="type yet_another_parachain_runtime::pallet_collator_selection::CandidateList"><code>CandidateList</code></a>: these are <em>candidates to the collation task</em> and may or may not be elected
as a final collator.</li>
</ol>
<p>The current implementation resolves congestion of <a href="type.CandidateList.html" title="type yet_another_parachain_runtime::pallet_collator_selection::CandidateList"><code>CandidateList</code></a> through a simple auction
mechanism. Candidates bid for the collator slots and at the end of the session, the auction ends
and the top candidates are selected to become collators. The number of selected candidates is
determined by the value of <code>DesiredCandidates</code>.</p>
<p>Before the list reaches full capacity, candidates can register by placing the minimum bond
through <code>register_as_candidate</code>. Then, if an account wants to participate in the collator slot
auction, they have to replace an existing candidate by placing a greater deposit through
<code>take_candidate_slot</code>. Existing candidates can increase their bids through <code>update_bond</code>.</p>
<p>At any point, an account can take the place of another account in the candidate list if they put
up a greater deposit than the target. While new joiners would like to deposit as little as
possible to participate in the auction, the replacement threat incentivizes candidates to bid as
close to their budget as possible in order to avoid being replaced.</p>
<p>Candidates which are not on โwinningโ slots in the list can also decrease their deposits through
<code>update_bond</code>, but candidates who are on top slots and try to decrease their deposits will fail
in order to enforce auction mechanics and have meaningful bids.</p>
<p>Candidates will not be allowed to get kicked or <code>leave_intent</code> if the total number of collators
would fall below <code>MinEligibleCollators</code>. This is to ensure that some collators will always
exist, i.e. someone is eligible to produce a block.</p>
<p>When a new session starts, candidates with the highest deposits will be selected in order until
the desired number of collators is reached. Candidates can increase or decrease their deposits
between sessions in order to ensure they receive a slot in the collator list.</p>
<h4 id="rewards"><a class="doc-anchor" href="#rewards">ยง</a>Rewards</h4>
<p>The Collator Selection pallet maintains an on-chain account (the โPotโ). In each block, the
collator who authored it receives:</p>
<ul>
<li>Half the value of the Pot.</li>
<li>Half the value of the transaction fees within the block. The other half of the transaction
fees are deposited into the Pot.</li>
</ul>
<p>To initiate rewards, an ED needs to be transferred to the pot address.</p>
<p>Note: Eventually the Pot distribution may be modified as discussed in <a href="https://github.com/paritytech/statemint/issues/21#issuecomment-810481073">this
issue</a>.</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">ยง</a></h2><dl class="item-table"><dt><a class="mod" href="migration/index.html" title="mod yet_another_parachain_runtime::pallet_collator_selection::migration">migration</a></dt><dd>A module that is responsible for migration of storage for Collator Selection.</dd><dt><a class="mod" href="pallet/index.html" title="mod yet_another_parachain_runtime::pallet_collator_selection::pallet">pallet</a></dt><dd>The <code>pallet</code> module in each FRAME pallet hosts the most important items needed
to construct this pallet.</dd><dt><a class="mod" href="weights/index.html" title="mod yet_another_parachain_runtime::pallet_collator_selection::weights">weights</a></dt></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">ยง</a></h2><dl class="item-table"><dt><a class="struct" href="struct.CandidateInfo.html" title="struct yet_another_parachain_runtime::pallet_collator_selection::CandidateInfo">Candidate<wbr>Info</a></dt><dd>Basic information about a collation candidate.</dd><dt><a class="struct" href="struct.GenesisConfig.html" title="struct yet_another_parachain_runtime::pallet_collator_selection::GenesisConfig">Genesis<wbr>Config</a></dt><dd>Can be used to configure the
<a href="https://docs.substrate.io/build/genesis-configuration/">genesis state</a>
of this pallet.</dd><dt><a class="struct" href="struct.IdentityCollator.html" title="struct yet_another_parachain_runtime::pallet_collator_selection::IdentityCollator">Identity<wbr>Collator</a></dt><dd>A convertor from collators id. Since this pallet does not have stash/controller, this is
just identity.</dd><dt><a class="struct" href="struct.Pallet.html" title="struct yet_another_parachain_runtime::pallet_collator_selection::Pallet">Pallet</a></dt><dd>The <code>Pallet</code> struct, the main type that implements traits and standalone
functions within the pallet.</dd><dt><a class="struct" href="struct.StakingPotAccountId.html" title="struct yet_another_parachain_runtime::pallet_collator_selection::StakingPotAccountId">Staking<wbr>PotAccount<wbr>Id</a></dt><dd><a href="../frame_support/pallet_prelude/trait.TypedGet.html" title="trait yet_another_parachain_runtime::frame_support::pallet_prelude::TypedGet"><code>TypedGet</code></a> implementation to get the AccountId of the StakingPot.</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">ยง</a></h2><dl class="item-table"><dt><a class="enum" href="enum.Call.html" title="enum yet_another_parachain_runtime::pallet_collator_selection::Call">Call</a></dt><dd>Contains a variant per dispatchable extrinsic that this pallet has.</dd><dt><a class="enum" href="enum.Error.html" title="enum yet_another_parachain_runtime::pallet_collator_selection::Error">Error</a></dt><dd>The <code>Error</code> enum of this pallet.</dd><dt><a class="enum" href="enum.Event.html" title="enum yet_another_parachain_runtime::pallet_collator_selection::Event">Event</a></dt><dd>The <code>Event</code> enum of this pallet</dd></dl><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">ยง</a></h2><dl class="item-table"><dt><a class="trait" href="trait.Config.html" title="trait yet_another_parachain_runtime::pallet_collator_selection::Config">Config</a></dt><dd>Configuration trait of this pallet.</dd><dt><a class="trait" href="trait.WeightInfo.html" title="trait yet_another_parachain_runtime::pallet_collator_selection::WeightInfo">Weight<wbr>Info</a></dt></dl><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">ยง</a></h2><dl class="item-table"><dt><a class="type" href="type.CandidacyBond.html" title="type yet_another_parachain_runtime::pallet_collator_selection::CandidacyBond">Candidacy<wbr>Bond</a></dt><dd>Fixed amount to deposit to become a collator.</dd><dt><a class="type" href="type.CandidateList.html" title="type yet_another_parachain_runtime::pallet_collator_selection::CandidateList">Candidate<wbr>List</a></dt><dd>The (community, limited) collation candidates. <code>Candidates</code> and <code>Invulnerables</code> should be
mutually exclusive.</dd><dt><a class="type" href="type.DesiredCandidates.html" title="type yet_another_parachain_runtime::pallet_collator_selection::DesiredCandidates">Desired<wbr>Candidates</a></dt><dd>Desired number of candidates.</dd><dt><a class="type" href="type.Invulnerables.html" title="type yet_another_parachain_runtime::pallet_collator_selection::Invulnerables">Invulnerables</a></dt><dd>The invulnerable, permissioned collators. This list must be sorted.</dd><dt><a class="type" href="type.LastAuthoredBlock.html" title="type yet_another_parachain_runtime::pallet_collator_selection::LastAuthoredBlock">Last<wbr>Authored<wbr>Block</a></dt><dd>Last block authored by collator.</dd><dt><a class="type" href="type.Module.html" title="type yet_another_parachain_runtime::pallet_collator_selection::Module">Module</a><wbr><span class="stab deprecated" title="">Deprecated</span></dt><dd>Type alias to <code>Pallet</code>, to be used by <code>construct_runtime</code>.</dd></dl></section></div></main><script> mermaid.init({ startOnLoad: true, theme: "dark" }, "pre.language-mermaid > code");</script>


</body></html>