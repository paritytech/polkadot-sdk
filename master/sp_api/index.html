<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Substrate runtime api"><title>sp_api - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-1a91846b.css"><script id="default-settings" 
data-use_system_theme="false"
data-theme="ayu"></script><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="sp_api" data-themes="" data-resource-suffix="" data-rustdoc-version="1.88.0 (6b00bc388 2025-06-23)" data-channel="1.88.0" data-search-js="search-f7877310.js" data-settings-js="settings-5514c975.js" ><script src="../static.files/storage-4e99c027.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-7ef8a74a.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="stylesheet" href="../theme.css"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"><script>
	function createToC() {
		let sidebar = document.querySelector(".sidebar");
		let headers = document.querySelectorAll("#main-content h2, #main-content h3, #main-content h4");
		console.log(`detected polkadot_sdk_docs: headers: ${headers.length}`);

		let toc = document.createElement("div");
		toc.classList.add("sidebar-table-of-contents");
		toc.appendChild(document.createElement("h2").appendChild(document.createTextNode("Table of Contents")).parentNode);

		let modules = document.querySelectorAll("main .item-table a.mod");

		// the first two headers are always junk
		headers.forEach(header => {
			let link = document.createElement("a");
			link.href = "#" + header.id;
			const headerTextContent = header.textContent.replace("§", "")
			link.textContent = headerTextContent;
			link.className = header.tagName.toLowerCase();

			toc.appendChild(link);

			if (header.id == "modules" && headerTextContent == "Modules") {
				modules.forEach(module => {
					let link = document.createElement("a");
					link.href = module.href;
					link.textContent = module.textContent;
					link.className = "h3";

					toc.appendChild(link);
				});
			}
		});

		// insert toc as the second child in sidebar
		let sidebar_children = sidebar.children;
		if (sidebar_children.length > 1) {
			sidebar.insertBefore(toc, sidebar_children[1]);
		} else {
			sidebar.appendChild(toc);
		}
	}

	function hideSidebarElements() {
		// Create the 'Expand for More' button
		var expandButton = document.createElement('button');
		expandButton.innerText = 'Expand More Items';
		expandButton.classList.add('expand-button');

		// Insert the button at the top of the sidebar or before the '.sidebar-elems'
		var sidebarElems = document.querySelector('.sidebar-elems');
		sidebarElems.parentNode.insertBefore(expandButton, sidebarElems);

		// Initially hide the '.sidebar-elems'
		sidebarElems.style.display = 'none';

		// Add click event listener to the button
		expandButton.addEventListener('click', function () {
			// Toggle the display of the '.sidebar-elems'
			if (sidebarElems.style.display === 'none') {
				sidebarElems.style.display = 'block';
				expandButton.innerText = 'Collapse';
			} else {
				sidebarElems.style.display = 'none';
				expandButton.innerText = 'Expand for More';
			}
		});
	}

	window.addEventListener("DOMContentLoaded", (event) => {
		// if the crate is one that starts with `polkadot_sdk_docs`
		let crate_name = document.querySelector("#main-content > div > h1 > a:nth-child(1)");
		if (!crate_name.textContent.startsWith("polkadot_sdk_docs")) {
			console.log("skipping -- not `polkadot_sdk_docs`");
			return;
		} else {
			// insert class 'sdk-docs' to the body, so it enables the custom css rules.
			document.body.classList.add("sdk-docs");
		}

		createToC();
		hideSidebarElements();

		console.log("updating page based on being `polkadot_sdk_docs` crate");
	});
</script>

<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>

<style>
	body.sdk-docs {
		nav.side-bar {
			width: 300px;
		}

		.sidebar-table-of-contents {
			margin-bottom: 1em;
			padding: 0.5em;
		}

		.sidebar-table-of-contents a {
			display: block;
			margin: 0.2em 0;
		}

		.sidebar-table-of-contents .h2 {
			font-weight: bold;
			margin-left: 0;
		}

		.sidebar-table-of-contents .h3 {
			margin-left: 1em;
		}

		.sidebar-table-of-contents .h4 {
			margin-left: 2em;
		}

		.sidebar h2.location {
			display: none;
		}

		.sidebar-elems {
			display: none;
		}

		/* Center the 'Expand for More' button */
		.expand-button {
			display: inline-block;
			/* Use inline-block for sizing */
			margin: 10px auto;
			/* Auto margins for horizontal centering */
			padding: 5px 10px;
			background-color: #007bff;
			color: white;
			text-align: center;
			cursor: pointer;
			border: none;
			border-radius: 5px;
			width: auto;
			/* Centering the button within its parent container */
			position: relative;
			left: 50%;
			transform: translateX(-50%);
		}
	}
</style>

<script async defer src=https://apisa.parity.io/latest.js></script><noscript><img src=https://apisa.parity.io/latest.js alt= referrerpolicy=no-referrer-when-downgrade /></noscript></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../sp_api/index.html">sp_api</a><span class="version">26.0.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#versioning" title="Versioning">Versioning</a></li><li><a href="#testing" title="Testing">Testing</a></li><li><a href="#logging" title="Logging">Logging</a></li><li><a href="#how-does-it-work" title="How does it work?">How does it work?</a></li></ul><h3><a href="#macros">Crate Items</a></h3><ul class="block"><li><a href="#macros" title="Macros">Macros</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#constants" title="Constants">Constants</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#functions" title="Functions">Functions</a></li><li><a href="#types" title="Type Aliases">Type Aliases</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>sp_api</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/sp_api/lib.rs.html#18-857">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Substrate runtime api</p>
<p>The Substrate runtime api is the interface between the node and the runtime. There isn’t a fixed
set of runtime apis, instead it is up to the user to declare and implement these runtime apis.
The declaration of a runtime api is normally done outside of a runtime, while the implementation
of it has to be done in the runtime. We provide the <a href="macro.decl_runtime_apis.html" title="macro sp_api::decl_runtime_apis"><code>decl_runtime_apis!</code></a> macro for declaring
a runtime api and the <a href="macro.impl_runtime_apis.html" title="macro sp_api::impl_runtime_apis"><code>impl_runtime_apis!</code></a> for implementing them. The macro docs provide more
information on how to use them and what kind of attributes we support.</p>
<p>It is required that each runtime implements at least the <a href="trait.Core.html" title="trait sp_api::Core"><code>Core</code></a> runtime api. This runtime api
provides all the core functions that Substrate expects from a runtime.</p>
<h2 id="versioning"><a class="doc-anchor" href="#versioning">§</a>Versioning</h2>
<p>Runtime apis support versioning. Each runtime api itself has a version attached. It is also
supported to change function signatures or names in a non-breaking way. For more information on
versioning check the <a href="macro.decl_runtime_apis.html" title="macro sp_api::decl_runtime_apis"><code>decl_runtime_apis!</code></a> macro.</p>
<p>All runtime apis and their versions are returned as part of the [<code>RuntimeVersion</code>]. This can be
used to check which runtime api version is currently provided by the on-chain runtime.</p>
<h2 id="testing"><a class="doc-anchor" href="#testing">§</a>Testing</h2>
<p>For testing we provide the <a href="macro.mock_impl_runtime_apis.html" title="macro sp_api::mock_impl_runtime_apis"><code>mock_impl_runtime_apis!</code></a> macro that lets you implement a runtime
api for a mocked object to use it in tests.</p>
<h2 id="logging"><a class="doc-anchor" href="#logging">§</a>Logging</h2>
<p>Substrate supports logging from the runtime in native and in wasm. For that purpose it provides
the <a href="sp_runtime::runtime_logger::RuntimeLogger"><code>RuntimeLogger</code></a>. This runtime logger is
automatically enabled for each call into the runtime through the runtime api. As logging
introduces extra code that isn’t actually required for the logic of your runtime and also
increases the final wasm blob size, it is recommended to disable the logging for on-chain
wasm blobs. This can be done by enabling the <code>disable-logging</code> feature of this crate. Be aware
that this feature instructs <code>log</code> and <code>tracing</code> to disable logging at compile time by setting
the <code>max_level_off</code> feature for these crates. So, you should not enable this feature for a
native build as otherwise the node will not output any log messages.</p>
<h2 id="how-does-it-work"><a class="doc-anchor" href="#how-does-it-work">§</a>How does it work?</h2>
<p>Each runtime api is declared as a trait with functions. When compiled to WASM, each implemented
runtime api function is exported as a function with the following naming scheme
<code>${TRAIT_NAME}_${FUNCTION_NAME}</code>. Such a function has the following signature
<code>(ptr: *u8, length: u32) -&gt; u64</code>. It takes a pointer to an <code>u8</code> array and its length as an
argument. This <code>u8</code> array is expected to be the SCALE encoded parameters of the function as
defined in the trait. The return value is an <code>u64</code> that represents <code>length &lt;&lt; 32 | pointer</code> of
an <code>u8</code> array. This return value <code>u8</code> array contains the SCALE encoded return value as defined
by the trait function. The macros take care to encode the parameters and to decode the return
value.</p>
</div></details><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">§</a></h2><dl class="item-table"><dt><a class="macro" href="macro._frame_metadata_enabled.html" title="macro sp_api::_frame_metadata_enabled">_frame_<wbr>metadata_<wbr>enabled</a></dt><dt><a class="macro" href="macro._std_disabled.html" title="macro sp_api::_std_disabled">_std_<wbr>disabled</a></dt><dt><a class="macro" href="macro._std_enabled.html" title="macro sp_api::_std_enabled">_std_<wbr>enabled</a></dt><dt><a class="macro" href="macro.decl_runtime_apis.html" title="macro sp_api::decl_runtime_apis">decl_<wbr>runtime_<wbr>apis</a></dt><dd>Declares given traits as runtime apis.</dd><dt><a class="macro" href="macro.frame_metadata_enabled.html" title="macro sp_api::frame_metadata_enabled">frame_<wbr>metadata_<wbr>enabled</a></dt><dd>Enable/disable the given code depending on
<code>feature = "frame-metadata"</code>
being enabled for the crate or not.</dd><dt><a class="macro" href="macro.impl_runtime_apis.html" title="macro sp_api::impl_runtime_apis">impl_<wbr>runtime_<wbr>apis</a></dt><dd>Tags given trait implementations as runtime apis.</dd><dt><a class="macro" href="macro.mock_impl_runtime_apis.html" title="macro sp_api::mock_impl_runtime_apis">mock_<wbr>impl_<wbr>runtime_<wbr>apis</a></dt><dd>Mocks given trait implementations as runtime apis.</dd><dt><a class="macro" href="macro.std_disabled.html" title="macro sp_api::std_disabled">std_<wbr>disabled</a></dt><dd>Enable/disable the given code depending on
<code>not(feature = "std")</code>
being enabled for the crate or not.</dd><dt><a class="macro" href="macro.std_enabled.html" title="macro sp_api::std_enabled">std_<wbr>enabled</a></dt><dd>Enable/disable the given code depending on
<code>feature = "std"</code>
being enabled for the crate or not.</dd></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.ApiRef.html" title="struct sp_api::ApiRef">ApiRef</a></dt><dd>Auxiliary wrapper that holds an api instance and binds it to the given lifetime.</dd><dt><a class="struct" href="struct.CallApiAtParams.html" title="struct sp_api::CallApiAtParams">Call<wbr>ApiAt<wbr>Params</a></dt><dd>Parameters for <a href="trait.CallApiAt.html#tymethod.call_api_at" title="method sp_api::CallApiAt::call_api_at"><code>CallApiAt::call_api_at</code></a>.</dd><dt><a class="struct" href="struct.StorageProof.html" title="struct sp_api::StorageProof">Storage<wbr>Proof</a></dt><dd>A proof that some set of key-value pairs are included in the storage trie. The proof contains
the storage values so that the partial storage backend can be reconstructed by a verifier that
does not already have access to the key-value pairs.</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.ApiError.html" title="enum sp_api::ApiError">ApiError</a></dt><dd>An error describing which API call failed.</dd><dt><a class="enum" href="enum.CallContext.html" title="enum sp_api::CallContext">Call<wbr>Context</a></dt><dd>The context in which a call is done.</dd><dt><a class="enum" href="enum.TransactionOutcome.html" title="enum sp_api::TransactionOutcome">Transaction<wbr>Outcome</a></dt><dd>Describes on what should happen with a storage transaction.</dd></dl><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><dl class="item-table"><dt><a class="constant" href="constant.RUNTIME_API_INFO_SIZE.html" title="constant sp_api::RUNTIME_API_INFO_SIZE">RUNTIME_<wbr>API_<wbr>INFO_<wbr>SIZE</a></dt><dd>The number of bytes required to encode a <a href="trait.RuntimeApiInfo.html" title="trait sp_api::RuntimeApiInfo"><code>RuntimeApiInfo</code></a>.</dd></dl><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><dl class="item-table"><dt><a class="trait" href="trait.ApiExt.html" title="trait sp_api::ApiExt">ApiExt</a></dt><dd>Extends the runtime api implementation with some common functionality.</dd><dt><a class="trait" href="trait.CallApiAt.html" title="trait sp_api::CallApiAt">Call<wbr>ApiAt</a></dt><dd>Something that can call into an api at a given block.</dd><dt><a class="trait" href="trait.ConstructRuntimeApi.html" title="trait sp_api::ConstructRuntimeApi">Construct<wbr>Runtime<wbr>Api</a></dt><dd>Something that can be constructed to a runtime api.</dd><dt><a class="trait" href="trait.Core.html" title="trait sp_api::Core">Core</a></dt><dd>The <code>Core</code> runtime api that every Substrate runtime needs to implement.</dd><dt><a class="trait" href="trait.Metadata.html" title="trait sp_api::Metadata">Metadata</a></dt><dd>The <code>Metadata</code> api trait that returns metadata for the runtime.</dd><dt><a class="trait" href="trait.ProvideRuntimeApi.html" title="trait sp_api::ProvideRuntimeApi">Provide<wbr>Runtime<wbr>Api</a></dt><dd>Something that provides a runtime api.</dd><dt><a class="trait" href="trait.RuntimeApiInfo.html" title="trait sp_api::RuntimeApiInfo">Runtime<wbr>ApiInfo</a></dt><dd>Something that provides information about a runtime api.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.deserialize_runtime_api_info.html" title="fn sp_api::deserialize_runtime_api_info">deserialize_<wbr>runtime_<wbr>api_<wbr>info</a></dt><dd>Deserialize the runtime API info serialized by <a href="fn.serialize_runtime_api_info.html" title="fn sp_api::serialize_runtime_api_info"><code>serialize_runtime_api_info</code></a>.</dd><dt><a class="fn" href="fn.init_runtime_logger.html" title="fn sp_api::init_runtime_logger">init_<wbr>runtime_<wbr>logger</a></dt><dd>Init the <a href="sp_runtime::runtime_logger::RuntimeLogger"><code>RuntimeLogger</code></a>.</dd><dt><a class="fn" href="fn.serialize_runtime_api_info.html" title="fn sp_api::serialize_runtime_api_info">serialize_<wbr>runtime_<wbr>api_<wbr>info</a></dt><dd>Crude and simple way to serialize the <code>RuntimeApiInfo</code> into a bunch of bytes.</dd></dl><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><dl class="item-table"><dt><a class="type" href="type.ProofRecorder.html" title="type sp_api::ProofRecorder">Proof<wbr>Recorder</a></dt><dd>A type that records all accessed trie nodes and generates a proof out of it.</dd><dt><a class="type" href="type.ProofRecorderIgnoredNodes.html" title="type sp_api::ProofRecorderIgnoredNodes">Proof<wbr>Recorder<wbr>Ignored<wbr>Nodes</a></dt><dt><a class="type" href="type.StorageChanges.html" title="type sp_api::StorageChanges">Storage<wbr>Changes</a></dt></dl></section></div></main><script> mermaid.init({ startOnLoad: true, theme: "dark" }, "pre.language-mermaid > code");</script>


</body></html>