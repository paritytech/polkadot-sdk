<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Parachain PoV recovery"><title>cumulus_client_pov_recovery - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-cb6f1f67f1bcd037.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="cumulus_client_pov_recovery" data-themes="" data-resource-suffix="" data-rustdoc-version="1.73.0 (cc66ad468 2023-10-03)" data-channel="1.73.0" data-search-js="search-6dfdfced5eff6596.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-1596385f77d47ef2.css" data-theme-dark-css="dark-0a43001d3fc2282c.css" data-theme-ayu-css="ayu-fd19013d6ce078bf.css" ><script src="../static.files/storage-db41da1a38ea3cb8.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../static.files/light-1596385f77d47ef2.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../static.files/dark-0a43001d3fc2282c.css"><link rel="stylesheet" href="../static.files/noscript-cffde32267a19fd6.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"><script async defer src="https://apisa.parity.io/latest.js"></script><noscript><img src="https://apisa.parity.io/latest.js" alt="" referrerpolicy="no-referrer-when-downgrade" /></noscript></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../cumulus_client_pov_recovery/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../cumulus_client_pov_recovery/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate cumulus_client_pov_recovery</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.1.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">cumulus_client_pov_recovery</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/cumulus_client_pov_recovery/lib.rs.html#17-657">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Parachain PoV recovery</p>
<p>A parachain needs to build PoVs that are send to the relay chain to progress. These PoVs are
erasure encoded and one piece of it is stored by each relay chain validator. As the relay chain
decides on which PoV per parachain to include and thus, to progess the parachain it can happen
that the block corresponding to this PoV isn’t propagated in the parachain network. This can
have several reasons, either a malicious collator that managed to include its own PoV and
doesn’t want to share it with the rest of the network or maybe a collator went down before it
could distribute the block in the network. When something like this happens we can use the PoV
recovery algorithm implemented in this crate to recover a PoV and to propagate it with the rest
of the network.</p>
<p>It works in the following way:</p>
<ol>
<li>
<p>For every included relay chain block we note the backed candidate of our parachain. If the
block belonging to the PoV is already known, we do nothing. Otherwise we start a timer that
waits for a randomized time inside a specified interval before starting to
recover    the PoV.</p>
</li>
<li>
<p>If between starting and firing the timer the block is imported, we skip the recovery of the
PoV.</p>
</li>
<li>
<p>If the timer fired we recover the PoV using the relay chain PoV recovery protocol.</p>
</li>
</ol>
<p>4a. After it is recovered, we restore the block and import it.</p>
<p>4b. Since we are trying to recover pending candidates, availability is not guaranteed. If the
block     PoV is not yet available, we retry.</p>
<p>If we need to recover multiple PoV blocks (which should hopefully not happen in real life), we
make sure that the blocks are imported in the correct order.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.PoVRecovery.html" title="struct cumulus_client_pov_recovery::PoVRecovery">PoVRecovery</a></div><div class="desc docblock-short">Encapsulates the logic of the pov recovery.</div></li><li><div class="item-name"><a class="struct" href="struct.RecoveryDelayRange.html" title="struct cumulus_client_pov_recovery::RecoveryDelayRange">RecoveryDelayRange</a></div><div class="desc docblock-short">The delay between observing an unknown block and triggering the recovery of a block.
Randomizing the start of the recovery within this interval
can be used to prevent self-DOSing if the recovery request is part of a
distributed protocol and there is the possibility that multiple actors are
requiring to perform the recovery action at approximately the same time.</div></li><li><div class="item-name"><a class="struct" href="struct.RecoveryRequest.html" title="struct cumulus_client_pov_recovery::RecoveryRequest">RecoveryRequest</a></div><div class="desc docblock-short">Structure used to trigger an explicit recovery request via <code>PoVRecovery</code>.</div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.RecoveryKind.html" title="enum cumulus_client_pov_recovery::RecoveryKind">RecoveryKind</a></div><div class="desc docblock-short">Type of recovery to trigger.</div></li></ul><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.RecoveryHandle.html" title="trait cumulus_client_pov_recovery::RecoveryHandle">RecoveryHandle</a></div><div class="desc docblock-short">Test-friendly wrapper trait for the overseer handle.
Can be used to simulate failing recovery requests.</div></li></ul></section></div></main></body></html>