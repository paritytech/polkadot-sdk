<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Polite gossiping."><title>sc_network_gossip - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-cb6f1f67f1bcd037.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="sc_network_gossip" data-themes="" data-resource-suffix="" data-rustdoc-version="1.73.0 (cc66ad468 2023-10-03)" data-channel="1.73.0" data-search-js="search-6dfdfced5eff6596.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-1596385f77d47ef2.css" data-theme-dark-css="dark-0a43001d3fc2282c.css" data-theme-ayu-css="ayu-fd19013d6ce078bf.css" ><script src="../static.files/storage-db41da1a38ea3cb8.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../static.files/light-1596385f77d47ef2.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../static.files/dark-0a43001d3fc2282c.css"><link rel="stylesheet" href="../static.files/noscript-cffde32267a19fd6.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"><script async defer src="https://apisa.parity.io/latest.js"></script><noscript><img src="https://apisa.parity.io/latest.js" alt="" referrerpolicy="no-referrer-when-downgrade" /></noscript></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../sc_network_gossip/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../sc_network_gossip/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate sc_network_gossip</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.10.0-dev</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">sc_network_gossip</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/sc_network_gossip/lib.rs.html#19-105">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Polite gossiping.</p>
<p>This crate provides gossiping capabilities on top of a network.</p>
<p>Gossip messages are separated by two categories: “topics” and consensus engine ID.
The consensus engine ID is sent over the wire with the message, while the topic is not,
with the expectation that the topic can be derived implicitly from the content of the
message, assuming it is valid.</p>
<p>Topics are a single 32-byte tag associated with a message, used to group those messages
in an opaque way. Consensus code can invoke <a href="trait.ValidatorContext.html#tymethod.broadcast_topic" title="method sc_network_gossip::ValidatorContext::broadcast_topic"><code>ValidatorContext::broadcast_topic</code></a> to
attempt to send all messages under a single topic to all peers who don’t have them yet, and
<a href="trait.ValidatorContext.html#tymethod.send_topic" title="method sc_network_gossip::ValidatorContext::send_topic"><code>ValidatorContext::send_topic</code></a> to send all messages under a single topic to a specific peer.</p>
<h2 id="usage"><a href="#usage">Usage</a></h2>
<ul>
<li>Implement the <a href="trait.Network.html" title="trait sc_network_gossip::Network"><code>Network</code></a> trait, representing the low-level networking primitives. It is
already implemented on <code>sc_network::NetworkService</code>.</li>
<li>Implement the <a href="trait.Validator.html" title="trait sc_network_gossip::Validator"><code>Validator</code></a> trait. See the section below.</li>
<li>Decide on a protocol name. Each gossiping protocol should have a different one.</li>
<li>Build a <a href="struct.GossipEngine.html" title="struct sc_network_gossip::GossipEngine"><code>GossipEngine</code></a> using these three elements.</li>
<li>Use the methods of the <a href="struct.GossipEngine.html" title="struct sc_network_gossip::GossipEngine"><code>GossipEngine</code></a> in order to send out messages and receive incoming
messages.</li>
</ul>
<p>The <a href="struct.GossipEngine.html" title="struct sc_network_gossip::GossipEngine"><code>GossipEngine</code></a> will automatically use <a href="trait.Network.html#method.add_set_reserved" title="method sc_network_gossip::Network::add_set_reserved"><code>Network::add_set_reserved</code></a> and
<a href="../sc_network/service/traits/trait.NetworkPeers.html#tymethod.remove_peers_from_reserved_set" title="method sc_network::service::traits::NetworkPeers::remove_peers_from_reserved_set"><code>NetworkPeers::remove_peers_from_reserved_set</code></a> to maintain a set of peers equal to the set of
peers the node is syncing from. See the documentation of <code>sc-network</code> for more explanations
about the concepts of peer sets.</p>
<h2 id="what-is-a-validator"><a href="#what-is-a-validator">What is a validator?</a></h2>
<p>The primary role of a <a href="trait.Validator.html" title="trait sc_network_gossip::Validator"><code>Validator</code></a> is to process incoming messages from peers, and decide
whether to discard them or process them. It also decides whether to re-broadcast the message.</p>
<p>The secondary role of the <a href="trait.Validator.html" title="trait sc_network_gossip::Validator"><code>Validator</code></a> is to check if a message is allowed to be sent to a
given peer. All messages, before being sent, will be checked against this filter.
This enables the validator to use information it’s aware of about connected peers to decide
whether to send messages to them at any given moment in time - In particular, to wait until
peers can accept and process the message before sending it.</p>
<p>Lastly, the fact that gossip validators can decide not to rebroadcast messages
opens the door for neighbor status packets to be baked into the gossip protocol.
These status packets will typically contain light pieces of information
used to inform peers of a current view of protocol state.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.DiscardAll.html" title="struct sc_network_gossip::DiscardAll">DiscardAll</a></div><div class="desc docblock-short">A gossip message validator that discards all messages.</div></li><li><div class="item-name"><a class="struct" href="struct.GossipEngine.html" title="struct sc_network_gossip::GossipEngine">GossipEngine</a></div><div class="desc docblock-short">Wraps around an implementation of the <a href="trait.Network.html" title="trait sc_network_gossip::Network"><code>Network</code></a> trait and provides gossiping capabilities on
top of it.</div></li><li><div class="item-name"><a class="struct" href="struct.TopicNotification.html" title="struct sc_network_gossip::TopicNotification">TopicNotification</a></div><div class="desc docblock-short">Topic stream message with sender.</div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.MessageIntent.html" title="enum sc_network_gossip::MessageIntent">MessageIntent</a></div><div class="desc docblock-short">The reason for sending out the message.</div></li><li><div class="item-name"><a class="enum" href="enum.ValidationResult.html" title="enum sc_network_gossip::ValidationResult">ValidationResult</a></div><div class="desc docblock-short">Message validation result.</div></li></ul><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.Network.html" title="trait sc_network_gossip::Network">Network</a></div><div class="desc docblock-short">Abstraction over a network.</div></li><li><div class="item-name"><a class="trait" href="trait.Syncing.html" title="trait sc_network_gossip::Syncing">Syncing</a></div><div class="desc docblock-short">Abstraction over the syncing subsystem.</div></li><li><div class="item-name"><a class="trait" href="trait.Validator.html" title="trait sc_network_gossip::Validator">Validator</a></div><div class="desc docblock-short">Validates consensus messages.</div></li><li><div class="item-name"><a class="trait" href="trait.ValidatorContext.html" title="trait sc_network_gossip::ValidatorContext">ValidatorContext</a></div><div class="desc docblock-short">Validation context. Allows reacting to incoming messages by sending out further messages.</div></li></ul></section></div></main></body></html>