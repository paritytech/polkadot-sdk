<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Landlock ABI version. We use ABI V1 because:"><title>LANDLOCK_ABI in polkadot_node_core_pvf_common::worker::security::landlock - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-cb6f1f67f1bcd037.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="polkadot_node_core_pvf_common" data-themes="" data-resource-suffix="" data-rustdoc-version="1.73.0 (cc66ad468 2023-10-03)" data-channel="1.73.0" data-search-js="search-6dfdfced5eff6596.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-1596385f77d47ef2.css" data-theme-dark-css="dark-0a43001d3fc2282c.css" data-theme-ayu-css="ayu-fd19013d6ce078bf.css" ><script src="../../../../static.files/storage-db41da1a38ea3cb8.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../../../static.files/light-1596385f77d47ef2.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../../../static.files/dark-0a43001d3fc2282c.css"><link rel="stylesheet" href="../../../../static.files/noscript-cffde32267a19fd6.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-2c020d218678b618.svg"><script async defer src="https://apisa.parity.io/latest.js"></script><noscript><img src="https://apisa.parity.io/latest.js" alt="" referrerpolicy="no-referrer-when-downgrade" /></noscript></head><body class="rustdoc constant"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../../../polkadot_node_core_pvf_common/index.html"><img class="rust-logo" src="../../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../../../polkadot_node_core_pvf_common/index.html"><img class="rust-logo" src="../../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><div class="sidebar-elems"><h2><a href="index.html">In polkadot_node_core_pvf_common::worker::security::landlock</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Constant <a href="../../../index.html">polkadot_node_core_pvf_common</a>::<wbr><a href="../../index.html">worker</a>::<wbr><a href="../index.html">security</a>::<wbr><a href="index.html">landlock</a>::<wbr><a class="constant" href="#">LANDLOCK_ABI</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../../../src/polkadot_node_core_pvf_common/worker/security/landlock.rs.html#73">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub const LANDLOCK_ABI: ABI;</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Landlock ABI version. We use ABI V1 because:</p>
<ol>
<li>It is supported by our reference kernel version.</li>
<li>Later versions do not (yet) provide additional security that would benefit us.</li>
</ol>
<h2 id="versions-as-of-october-2023"><a href="#versions-as-of-october-2023">Versions (as of October 2023)</a></h2>
<ul>
<li>
<p>Polkadot reference kernel version: 5.16+</p>
</li>
<li>
<p>ABI V1: kernel 5.13 - Introduces landlock, including full restrictions on file reads.</p>
</li>
<li>
<p>ABI V2: kernel 5.19 - Adds ability to prevent file renaming. Does not help us. During
execution an attacker can only affect the name of a symlinked artifact and not the original
one.</p>
</li>
<li>
<p>ABI V3: kernel 6.2 - Adds ability to prevent file truncation. During execution, can
prevent attackers from affecting a symlinked artifact. We don’t strictly need this as we
plan to check for file integrity anyway; see
<a href="https://github.com/paritytech/polkadot-sdk/issues/677">https://github.com/paritytech/polkadot-sdk/issues/677</a>.</p>
</li>
</ul>
<h2 id="determinism"><a href="#determinism">Determinism</a></h2>
<p>You may wonder whether we could always use the latest ABI instead of only the ABI supported
by the reference kernel version. It seems plausible, since landlock provides a best-effort
approach to enabling sandboxing. For example, if the reference version only supported V1 and
we were on V2, then landlock would use V2 if it was supported on the current machine, and
just fall back to V1 if not.</p>
<p>The issue with this is indeterminacy. If half of validators were on V2 and half were on V1,
they may have different semantics on some PVFs. So a malicious PVF now has a new attack
vector: they can exploit this indeterminism between landlock ABIs!</p>
<p>On the other hand we do want validators to be as secure as possible and protect their keys
from attackers. And, the risk with indeterminacy is low and there are other indeterminacy
vectors anyway. So we will only upgrade to a new ABI if either the reference kernel version
supports it or if it introduces some new feature that is beneficial to security.</p>
</div></details></section></div></main></body></html>