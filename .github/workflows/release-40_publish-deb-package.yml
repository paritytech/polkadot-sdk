name: Release - Publish polakdot deb package

on:
  workflow_dispatch:
    inputs:
      tag:
        description: Current final release tag in the format stableYYMM
        default: stable2412
        required: true
        type: string

jobs:
  # check-synchronization:
  #   uses: paritytech-release/sync-workflows/.github/workflows/check-syncronization.yml@main

  validate-inputs:
    # needs: [check-synchronization]
    # if: ${{ needs.check-synchronization.outputs.checks_passed }} == 'true'
    runs-on: ubuntu-latest
    outputs:
        release_tag: ${{ steps.validate_inputs.outputs.release_tag }}

    steps:
      - name: Checkout sources
        uses: actions/checkout@d632683dd7b4114ad314bca15554477dd762a938 # v4.2.0

      - name: Validate inputs
        id: validate_inputs
        run: |
          . ./.github/scripts/common/lib.sh

          RELEASE_TAG=$(validate_stable_tag ${{ inputs.tag }})
          echo "release_tag=${RELEASE_TAG}" >> $GITHUB_OUTPUT


  fetch-artifacts-from-s3:
    runs-on: ubuntu-latest
    needs: [validate-inputs]
    env:
      REPO: ${{ github.repository }}
      RELEASE_TAG: ${{ needs.validate-inputs.outputs.release_tag }}

    steps:
      - name: Checkout sources
        uses: actions/checkout@d632683dd7b4114ad314bca15554477dd762a938 # v4.2.0

      - name: Fetch rc artifacts or release artifacts from s3 based on version
        run: |
          . ./.github/scripts/common/lib.sh

          #VERSION="$(get_polkadot_node_version_from_code)"
          VERSION="1.16.1"

          fetch_debian_package_from_s3 polkadot


  #publish-deb-package:
